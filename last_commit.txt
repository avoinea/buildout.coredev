Repository: plone.autoform


Branch: refs/heads/master
Date: 2020-03-17T18:02:38+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.autoform/commit/54c040fc4971ffcaa14b606c5295ce91a20ec607

support for zope.interface &gt;= 5

Files changed:
A news/39.feature
M plone/autoform/autoform.rst
M setup.py

b'diff --git a/news/39.feature b/news/39.feature\nnew file mode 100644\nindex 0000000..bcb02e3\n--- /dev/null\n+++ b/news/39.feature\n@@ -0,0 +1,3 @@\n+Support for zope.interface 5. \n+See https://github.com/zopefoundation/zope.interface/pull/183#issuecomment-599547556\n+[jensens]\ndiff --git a/plone/autoform/autoform.rst b/plone/autoform/autoform.rst\nindex c57e1a8..2b00f09 100644\n--- a/plone/autoform/autoform.rst\n+++ b/plone/autoform/autoform.rst\n@@ -419,13 +419,22 @@ condition for group naming when autoGroups is True.\n     ...\n     >>> IUnknownName.__name__ = \'\'  # dynamic schema, empty __name__\n \n-    >>> class IAnotherAnonymousSchema(Interface):\n-    ...     that = schema.TextLine()\n-    ...\n-    >>> IAnotherAnonymousSchema.__name__ = \'\'\n+In any case, if we want to have a different anonymous schema, we have to create it using the InterfaceClass constructor.\n+The rare case of setting `__name__` or `__module__` is not supported in zope.interface >= 5 due to performance optimizations.\n+For more information also read:\n+\n+- https://github.com/zopefoundation/zope.interface/issues/31\n+- https://github.com/zopefoundation/zope.interface/pull/183#issuecomment-599547556\n+\n+::\n+\n+    >>> from zope.interface.interface import InterfaceClass\n+    >>> IAnotherAnonymousSchema = InterfaceClass(\n+    ...     \'\',\n+    ...     (Interface,),\n+    ...     {\'that\': schema.TextLine(), \'__module__\': \'different.module\'},\n+    ... )\n \n-Fix for https://github.com/zopefoundation/zope.interface/issues/31\n-    >>> IAnotherAnonymousSchema.__module__ = \'different.module\'\n \n     Create an extrinsicly stored name mapping:\n \ndiff --git a/setup.py b/setup.py\nindex c7e8e0c..396e206 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -9,7 +9,7 @@ def read(*rnames):\n     return open(os.path.join(os.path.dirname(__file__), *rnames)).read()\n \n \n-version = \'1.8.3.dev0\'\n+version = \'1.9.0.dev0\'\n \n long_description = (read(\'README.rst\') + \'\\n\' + read(\'CHANGES.rst\'))\n \n@@ -22,13 +22,16 @@ def read(*rnames):\n     classifiers=[\n         "Development Status :: 5 - Production/Stable",\n         "Framework :: Plone",\n+        "Framework :: Plone :: Core",\n         "Framework :: Plone :: 5.1",\n         "Framework :: Plone :: 5.2",\n+        "Framework :: Plone :: 6.0",\n         "License :: OSI Approved :: GNU Library or Lesser General Public License (LGPL)",\n         "Programming Language :: Python",\n         "Programming Language :: Python :: 2.7",\n         "Programming Language :: Python :: 3.6",\n         "Programming Language :: Python :: 3.7",\n+        "Programming Language :: Python :: 3.8",\n         "Topic :: Software Development :: Libraries :: Python Modules",\n     ],\n     keywords=\'plone form z3c.form\',\n'

Repository: plone.autoform


Branch: refs/heads/master
Date: 2020-03-18T08:41:47+01:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/plone.autoform/commit/09037c7ed8f5e0b91b2b2a490da941962dfa4183

Merge pull request #39 from plone/zope-interface-5

support for zope.interface &gt;= 5

Files changed:
A news/39.feature
M plone/autoform/autoform.rst
M setup.py

b'diff --git a/news/39.feature b/news/39.feature\nnew file mode 100644\nindex 0000000..bcb02e3\n--- /dev/null\n+++ b/news/39.feature\n@@ -0,0 +1,3 @@\n+Support for zope.interface 5. \n+See https://github.com/zopefoundation/zope.interface/pull/183#issuecomment-599547556\n+[jensens]\ndiff --git a/plone/autoform/autoform.rst b/plone/autoform/autoform.rst\nindex c57e1a8..2b00f09 100644\n--- a/plone/autoform/autoform.rst\n+++ b/plone/autoform/autoform.rst\n@@ -419,13 +419,22 @@ condition for group naming when autoGroups is True.\n     ...\n     >>> IUnknownName.__name__ = \'\'  # dynamic schema, empty __name__\n \n-    >>> class IAnotherAnonymousSchema(Interface):\n-    ...     that = schema.TextLine()\n-    ...\n-    >>> IAnotherAnonymousSchema.__name__ = \'\'\n+In any case, if we want to have a different anonymous schema, we have to create it using the InterfaceClass constructor.\n+The rare case of setting `__name__` or `__module__` is not supported in zope.interface >= 5 due to performance optimizations.\n+For more information also read:\n+\n+- https://github.com/zopefoundation/zope.interface/issues/31\n+- https://github.com/zopefoundation/zope.interface/pull/183#issuecomment-599547556\n+\n+::\n+\n+    >>> from zope.interface.interface import InterfaceClass\n+    >>> IAnotherAnonymousSchema = InterfaceClass(\n+    ...     \'\',\n+    ...     (Interface,),\n+    ...     {\'that\': schema.TextLine(), \'__module__\': \'different.module\'},\n+    ... )\n \n-Fix for https://github.com/zopefoundation/zope.interface/issues/31\n-    >>> IAnotherAnonymousSchema.__module__ = \'different.module\'\n \n     Create an extrinsicly stored name mapping:\n \ndiff --git a/setup.py b/setup.py\nindex c7e8e0c..396e206 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -9,7 +9,7 @@ def read(*rnames):\n     return open(os.path.join(os.path.dirname(__file__), *rnames)).read()\n \n \n-version = \'1.8.3.dev0\'\n+version = \'1.9.0.dev0\'\n \n long_description = (read(\'README.rst\') + \'\\n\' + read(\'CHANGES.rst\'))\n \n@@ -22,13 +22,16 @@ def read(*rnames):\n     classifiers=[\n         "Development Status :: 5 - Production/Stable",\n         "Framework :: Plone",\n+        "Framework :: Plone :: Core",\n         "Framework :: Plone :: 5.1",\n         "Framework :: Plone :: 5.2",\n+        "Framework :: Plone :: 6.0",\n         "License :: OSI Approved :: GNU Library or Lesser General Public License (LGPL)",\n         "Programming Language :: Python",\n         "Programming Language :: Python :: 2.7",\n         "Programming Language :: Python :: 3.6",\n         "Programming Language :: Python :: 3.7",\n+        "Programming Language :: Python :: 3.8",\n         "Topic :: Software Development :: Libraries :: Python Modules",\n     ],\n     keywords=\'plone form z3c.form\',\n'

