Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2020-03-02T16:18:16+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/ca2c3d06617d6bab943010521f62c68b3c18c2bb

fix wrong return of ReplaceableWrapper

Files changed:
M Products/CMFPlone/PloneFolder.py
M Products/CMFPlone/Portal.py

b"diff --git a/Products/CMFPlone/PloneFolder.py b/Products/CMFPlone/PloneFolder.py\nindex 01a9b96559..6df2524380 100644\n--- a/Products/CMFPlone/PloneFolder.py\n+++ b/Products/CMFPlone/PloneFolder.py\n@@ -164,7 +164,7 @@ def index_html(self):\n                 # Very likely a WebDAV client trying to create something\n                 result = NullResource(self, 'index_html')\n                 setattr(result, '__replaceable__', REPLACEABLE)\n-                return ReplaceableWrapper()\n+                return result\n             elif method not in ('GET', 'HEAD', 'POST'):\n                 raise AttributeError('index_html')\n         # Acquire from skin.\ndiff --git a/Products/CMFPlone/Portal.py b/Products/CMFPlone/Portal.py\nindex 3f0c243d71..8dec1d662c 100644\n--- a/Products/CMFPlone/Portal.py\n+++ b/Products/CMFPlone/Portal.py\n@@ -99,7 +99,7 @@ def index_html(self):\n                 # Very likely a WebDAV client trying to create something\n                 result = NullResource(self, 'index_html')\n                 setattr(result, '__replaceable__', REPLACEABLE)\n-                return ReplaceableWrapper()\n+                return result\n             elif method not in ('GET', 'HEAD', 'POST'):\n                 raise AttributeError('index_html')\n         # Acquire from skin.\n"

