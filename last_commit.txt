Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-02-04T10:26:26+01:00
Author: Katja Suess (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.restapi/commit/cbad98a242cd44a3f00cd130f526983f92e424b3

Update test: plone.app.discussion

plone.app.discussion introduces an additional workflow. This change takes the additional workflow states into account.

Files changed:
A news/842.bugfix
M src/plone/restapi/tests/test_services_querystring.py

b'diff --git a/news/842.bugfix b/news/842.bugfix\nnew file mode 100644\nindex 00000000..c304bff1\n--- /dev/null\n+++ b/news/842.bugfix\n@@ -0,0 +1,2 @@\n+plone.app.discussion introduces an additional workflow. This change takes the additional workflow states into account.\n+[ksuess]\ndiff --git a/src/plone/restapi/tests/test_services_querystring.py b/src/plone/restapi/tests/test_services_querystring.py\nindex 3730b7c2..ac86ad1d 100644\n--- a/src/plone/restapi/tests/test_services_querystring.py\n+++ b/src/plone/restapi/tests/test_services_querystring.py\n@@ -93,7 +93,7 @@ def test_endpoint_inlines_vocabularies(self):\n             u"published": {u"title": u"Published with accent \\xe9 [published]"},\n             u"visible": {u"title": u"Public draft [visible]"},\n         }\n-        self.assertEqual(expected_vocab_values, idx["values"])\n+        self.assertDictContainsSubset(expected_vocab_values, idx["values"])\n \n     def test_endpoint_inlines_operators(self):\n         response = self.api_session.get("/@querystring")\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-02-04T10:26:26+01:00
Author: Katja Suess (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.restapi/commit/44d832f353a745075d9c254a03e490b543eed18d

Update test_services_querystring.py

replace deprecated assertDictContainsSubset with assertLessEqual on dictionary items()

Files changed:
M src/plone/restapi/tests/test_services_querystring.py

b'diff --git a/src/plone/restapi/tests/test_services_querystring.py b/src/plone/restapi/tests/test_services_querystring.py\nindex ac86ad1d..3a127d38 100644\n--- a/src/plone/restapi/tests/test_services_querystring.py\n+++ b/src/plone/restapi/tests/test_services_querystring.py\n@@ -93,7 +93,9 @@ def test_endpoint_inlines_vocabularies(self):\n             u"published": {u"title": u"Published with accent \\xe9 [published]"},\n             u"visible": {u"title": u"Public draft [visible]"},\n         }\n-        self.assertDictContainsSubset(expected_vocab_values, idx["values"])\n+        self.assertLessEqual(\n+            expected_vocab_values.items(),\n+            idx["values"].items())\n \n     def test_endpoint_inlines_operators(self):\n         response = self.api_session.get("/@querystring")\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-02-04T10:26:26+01:00
Author: Katja Suess (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.restapi/commit/3ea677fc03d64ce375ea79db9d52dc9f5602d910

test if default workflows exist

Files changed:
M src/plone/restapi/tests/test_services_querystring.py

b'diff --git a/src/plone/restapi/tests/test_services_querystring.py b/src/plone/restapi/tests/test_services_querystring.py\nindex 3a127d38..e749962e 100644\n--- a/src/plone/restapi/tests/test_services_querystring.py\n+++ b/src/plone/restapi/tests/test_services_querystring.py\n@@ -93,9 +93,9 @@ def test_endpoint_inlines_vocabularies(self):\n             u"published": {u"title": u"Published with accent \\xe9 [published]"},\n             u"visible": {u"title": u"Public draft [visible]"},\n         }\n-        self.assertLessEqual(\n-            expected_vocab_values.items(),\n-            idx["values"].items())\n+        self.assertTrue(\n+            all(elem in idx["values"].items() for elem in expected_vocab_values.items())\n+        )\n \n     def test_endpoint_inlines_operators(self):\n         response = self.api_session.get("/@querystring")\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-02-04T10:26:26+01:00
Author: Katja Suess (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.restapi/commit/1813e19f8d60fc12e2826d374c7bad251d2a1132

Update 842.bugfix

Files changed:
M news/842.bugfix

b'diff --git a/news/842.bugfix b/news/842.bugfix\nindex c304bff1..0f6c31bd 100644\n--- a/news/842.bugfix\n+++ b/news/842.bugfix\n@@ -1,2 +1,2 @@\n-plone.app.discussion introduces an additional workflow. This change takes the additional workflow states into account.\n+plone.app.discussion extends the review workflow for moderation of comments. This change takes the additional workflow states into account.\n [ksuess]\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2020-03-13T16:25:11+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.restapi/commit/93f6db56c852afd728b1333ff8af5d7141b2b4c2

Merge pull request #843 from plone/plone.app.discussion-moderation

Update test: plone.app.discussion

Files changed:
A news/842.bugfix
M src/plone/restapi/tests/test_services_querystring.py

b'diff --git a/news/842.bugfix b/news/842.bugfix\nnew file mode 100644\nindex 00000000..0f6c31bd\n--- /dev/null\n+++ b/news/842.bugfix\n@@ -0,0 +1,2 @@\n+plone.app.discussion extends the review workflow for moderation of comments. This change takes the additional workflow states into account.\n+[ksuess]\ndiff --git a/src/plone/restapi/tests/test_services_querystring.py b/src/plone/restapi/tests/test_services_querystring.py\nindex 3730b7c2..e749962e 100644\n--- a/src/plone/restapi/tests/test_services_querystring.py\n+++ b/src/plone/restapi/tests/test_services_querystring.py\n@@ -93,7 +93,9 @@ def test_endpoint_inlines_vocabularies(self):\n             u"published": {u"title": u"Published with accent \\xe9 [published]"},\n             u"visible": {u"title": u"Public draft [visible]"},\n         }\n-        self.assertEqual(expected_vocab_values, idx["values"])\n+        self.assertTrue(\n+            all(elem in idx["values"].items() for elem in expected_vocab_values.items())\n+        )\n \n     def test_endpoint_inlines_operators(self):\n         response = self.api_session.get("/@querystring")\n'

