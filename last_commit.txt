Repository: plone.releaser


Branch: refs/heads/master
Date: 2020-03-04T17:19:15+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.releaser/commit/8e2f3d3e7003306492642c0442962261beee477b

Ask before pushing an updated version when running 'report'.

Fixes https://github.com/plone/plone.releaser/issues/32

Files changed:
A news/32.bugfix
M plone/releaser/package.py

b'diff --git a/news/32.bugfix b/news/32.bugfix\nnew file mode 100644\nindex 0000000..2b7e43f\n--- /dev/null\n+++ b/news/32.bugfix\n@@ -0,0 +1 @@\n+Ask before pushing an updated version when running \'report\'.  [maurits]\ndiff --git a/plone/releaser/package.py b/plone/releaser/package.py\nindex b7d06fd..705228a 100644\n--- a/plone/releaser/package.py\n+++ b/plone/releaser/package.py\n@@ -277,4 +277,6 @@ def update_version(self, tag):\n                 versions_path = os.path.join(os.getcwd(), "versions.cfg")\n                 core_repo.git.add(versions_path)\n                 core_repo.git.commit(message="{0}={1}".format(self.name, tag))\n-                core_repo.git.push()\n+                if confirm("Ok to push coredev?", default=True, skip=not self.interactive):\n+                    print("Pushing changes to server.")\n+                    core_repo.git.push()\n'

Repository: plone.releaser


Branch: refs/heads/master
Date: 2020-03-05T01:34:33+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.releaser/commit/242fdf92ec880597db29bc64a4810d9f11d1a753

Merge pull request #33 from plone/maurits/issue-32-push-ask

Ask before pushing an updated version when running 'report'.

Files changed:
A news/32.bugfix
M plone/releaser/package.py

b'diff --git a/news/32.bugfix b/news/32.bugfix\nnew file mode 100644\nindex 0000000..2b7e43f\n--- /dev/null\n+++ b/news/32.bugfix\n@@ -0,0 +1 @@\n+Ask before pushing an updated version when running \'report\'.  [maurits]\ndiff --git a/plone/releaser/package.py b/plone/releaser/package.py\nindex b7d06fd..705228a 100644\n--- a/plone/releaser/package.py\n+++ b/plone/releaser/package.py\n@@ -277,4 +277,6 @@ def update_version(self, tag):\n                 versions_path = os.path.join(os.getcwd(), "versions.cfg")\n                 core_repo.git.add(versions_path)\n                 core_repo.git.commit(message="{0}={1}".format(self.name, tag))\n-                core_repo.git.push()\n+                if confirm("Ok to push coredev?", default=True, skip=not self.interactive):\n+                    print("Pushing changes to server.")\n+                    core_repo.git.push()\n'

