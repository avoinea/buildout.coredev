Repository: icalendar


Branch: refs/heads/master
Date: 2020-03-09T11:36:26+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/collective/icalendar/commit/c65c6b7e3fa0c4e0686de1163427fe5626cec34e

Fixed error in tests with duplicate parameter 'self'.

TypeError: __init__() got multiple values for argument 'self'
https://travis-ci.org/collective/icalendar/jobs/659260349

Files changed:
M src/icalendar/tests/hypothesis/test_fuzzing.py

b"diff --git a/src/icalendar/tests/hypothesis/test_fuzzing.py b/src/icalendar/tests/hypothesis/test_fuzzing.py\nindex 9581f74..cf2a175 100644\n--- a/src/icalendar/tests/hypothesis/test_fuzzing.py\n+++ b/src/icalendar/tests/hypothesis/test_fuzzing.py\n@@ -27,7 +27,11 @@ class TestFuzzing(unittest.TestCase):\n     def test_main(self, lines):\n         cl = Contentlines()\n         for key, params, value in lines:\n-            params = Parameters(**params)\n+            try:\n+                params = Parameters(**params)\n+            except TypeError:\n+                # Happens when there is a random parameter 'self'...\n+                continue\n             cl.append(Contentline.from_parts(key, params, value))\n         cl.append('')\n \n"

Repository: icalendar


Branch: refs/heads/master
Date: 2020-03-09T11:37:32+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/collective/icalendar/commit/d1ed9c42d0330982e323abc8e168e704fb3602d4

Tests: do less iterations with fuzzy contents.

https://github.com/collective/icalendar/pull/289#issuecomment-594219490

Files changed:
M src/icalendar/tests/hypothesis/test_fuzzing.py

b'diff --git a/src/icalendar/tests/hypothesis/test_fuzzing.py b/src/icalendar/tests/hypothesis/test_fuzzing.py\nindex cf2a175..051f5f5 100644\n--- a/src/icalendar/tests/hypothesis/test_fuzzing.py\n+++ b/src/icalendar/tests/hypothesis/test_fuzzing.py\n@@ -23,7 +23,7 @@ class TestFuzzing(unittest.TestCase):\n         st.tuples(key, st.dictionaries(key, value), value),\n         min_size=1\n     ))\n-    @settings(max_examples=10**4)\n+    @settings(max_examples=10**3)\n     def test_main(self, lines):\n         cl = Contentlines()\n         for key, params, value in lines:\n'

Repository: icalendar


Branch: refs/heads/master
Date: 2020-03-09T21:44:59+01:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/collective/icalendar/commit/2cc1dacb59154725d2e9baa95375d049158fc387

Merge pull request #309 from collective/maurits/improve-testing

Maurits/improve testing

Files changed:
M src/icalendar/tests/hypothesis/test_fuzzing.py

b"diff --git a/src/icalendar/tests/hypothesis/test_fuzzing.py b/src/icalendar/tests/hypothesis/test_fuzzing.py\nindex 9581f74..051f5f5 100644\n--- a/src/icalendar/tests/hypothesis/test_fuzzing.py\n+++ b/src/icalendar/tests/hypothesis/test_fuzzing.py\n@@ -23,11 +23,15 @@ class TestFuzzing(unittest.TestCase):\n         st.tuples(key, st.dictionaries(key, value), value),\n         min_size=1\n     ))\n-    @settings(max_examples=10**4)\n+    @settings(max_examples=10**3)\n     def test_main(self, lines):\n         cl = Contentlines()\n         for key, params, value in lines:\n-            params = Parameters(**params)\n+            try:\n+                params = Parameters(**params)\n+            except TypeError:\n+                # Happens when there is a random parameter 'self'...\n+                continue\n             cl.append(Contentline.from_parts(key, params, value))\n         cl.append('')\n \n"

