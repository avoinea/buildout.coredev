Repository: plone.app.event


Branch: refs/heads/master
Date: 2020-03-11T20:05:10+01:00
Author: 1letter (1letter) <1letter@gmx.de>
Commit: https://github.com/plone/plone.app.event/commit/295bb8e8690407ebcdf7bc90e1e1bbc6a16cc9ae

Change markup for structured data schemas

- changed in event_listing.pt
- changed in event_summary.pt
- changed in event_view.pt

Files changed:
A news/312.bugfix
M plone/app/event/browser/event_listing.pt
M plone/app/event/browser/event_summary.pt
M plone/app/event/browser/event_view.pt

b'diff --git a/news/312.bugfix b/news/312.bugfix\nnew file mode 100644\nindex 00000000..6f665bc2\n--- /dev/null\n+++ b/news/312.bugfix\n@@ -0,0 +1,3 @@\n+Change markup for structured data schemas from ``data-vocabulary.org`` to ``schema.org``.\n+Because google supports only schema.org - based definitions\n+[1letter]\ndiff --git a/plone/app/event/browser/event_listing.pt b/plone/app/event/browser/event_listing.pt\nindex b4159975..609c5ee1 100644\n--- a/plone/app/event/browser/event_listing.pt\n+++ b/plone/app/event/browser/event_listing.pt\n@@ -43,12 +43,15 @@\n \n     <tal:items repeat="data batch">\n \n-      <article itemscope itemtype="http://data-vocabulary.org/Event" class="vevent tileItem"\n+      <article itemscope itemtype="https://schema.org/Event" class="vevent tileItem"\n           tal:define="startf python:view.date_speller(data.start)">\n \n         <ul class="hiddenStructure">\n           <li itemprop="startDate" class="dtstart" tal:content="data/start/isoformat">end</li>\n           <li itemprop="endDate" class="dtend" tal:content="data/end/isoformat">end</li>\n+          <li  class="location" itemscope itemprop="location" itemtype="http://schema.org/Place">\n+            <span itemprop="address" tal:content="data/location" >location</span>\n+          </li>          \n         </ul>\n \n         <div class="cal_date">\n@@ -59,7 +62,7 @@\n \n         <div class="cal_info clearfix">\n           <h2 class="tileHeadline"><a href="" itemprop="url" class="url" tal:attributes="href data/url">\n-            <span itemprop="summary" class="summary" tal:content="data/title">Title</span>\n+            <span itemprop="name" class="summary" tal:content="data/title">Title</span>\n           </a></h2>\n           <div class="documentByLine">\n             <tal:date tal:replace="structure python:view.formatted_date(data)"/>\ndiff --git a/plone/app/event/browser/event_summary.pt b/plone/app/event/browser/event_summary.pt\nindex 406c9bf9..0a62c7cb 100644\n--- a/plone/app/event/browser/event_summary.pt\n+++ b/plone/app/event/browser/event_summary.pt\n@@ -22,7 +22,7 @@\n     <tal:cond condition="data/subjects">\n       <li class="event-category">\n         <strong i18n:translate="event_what">What</strong>\n-        <span itemprop="eventType" tal:repeat="item data/subjects" tal:content="item" />\n+        <span itemprop="disambiguatingDescription" tal:repeat="item data/subjects" tal:content="item" />\n       </li>\n     </tal:cond>\n     </tal:cond>\n@@ -72,9 +72,9 @@\n \n     <tal:cond condition="python:\'location\' not in excludes">\n     <tal:cond condition="data/location">\n-      <li class="event-location">\n+      <li class="event-location" itemprop="location" itemscope itemtype="http://schema.org/Place">\n         <strong i18n:translate="event_where">Where</strong>\n-        <span itemprop="location" tal:content="data/location">Location</span>\n+        <span itemprop="address" tal:content="data/location" >Location</span>\n       </li>\n     </tal:cond>\n     </tal:cond>\ndiff --git a/plone/app/event/browser/event_view.pt b/plone/app/event/browser/event_view.pt\nindex 82ec4468..538fc067 100644\n--- a/plone/app/event/browser/event_view.pt\n+++ b/plone/app/event/browser/event_view.pt\n@@ -11,11 +11,11 @@\n <metal:block define-macro="content-core">\n <tal:def tal:define="data nocall:view/data">\n \n-  <div class="event clearfix" itemscope itemtype="http://data-vocabulary.org/Event">\n+  <div class="event clearfix" itemscope itemtype="https://schema.org/Event">\n \n     <ul class="hiddenStructure">\n       <li><a itemprop="url" class="url" href="" tal:attributes="href data/url" tal:content="data/url">url</a></li>\n-      <li itemprop="summary" class="summary" tal:content="data/title">title</li>\n+      <li itemprop="name" class="summary" tal:content="data/title">title</li>\n       <li itemprop="startDate" class="dtstart" tal:content="data/start/isoformat">start</li>\n       <li itemprop="endDate" class="dtend" tal:content="data/end/isoformat">end</li>\n       <li itemprop="description" class="description" tal:content="data/description">description</li>\n'

Repository: plone.app.event


Branch: refs/heads/master
Date: 2020-03-12T19:57:22+01:00
Author: 1letter (1letter) <1letter@gmx.de>
Commit: https://github.com/plone/plone.app.event/commit/55ea5b7cbf5d9a598691ca83acb0b9da1baa2590

Merge pull request #314 from plone/1letter/change-microformat

Change markup for structured data schemas

Files changed:
A news/312.bugfix
M plone/app/event/browser/event_listing.pt
M plone/app/event/browser/event_summary.pt
M plone/app/event/browser/event_view.pt

b'diff --git a/news/312.bugfix b/news/312.bugfix\nnew file mode 100644\nindex 00000000..6f665bc2\n--- /dev/null\n+++ b/news/312.bugfix\n@@ -0,0 +1,3 @@\n+Change markup for structured data schemas from ``data-vocabulary.org`` to ``schema.org``.\n+Because google supports only schema.org - based definitions\n+[1letter]\ndiff --git a/plone/app/event/browser/event_listing.pt b/plone/app/event/browser/event_listing.pt\nindex b4159975..609c5ee1 100644\n--- a/plone/app/event/browser/event_listing.pt\n+++ b/plone/app/event/browser/event_listing.pt\n@@ -43,12 +43,15 @@\n \n     <tal:items repeat="data batch">\n \n-      <article itemscope itemtype="http://data-vocabulary.org/Event" class="vevent tileItem"\n+      <article itemscope itemtype="https://schema.org/Event" class="vevent tileItem"\n           tal:define="startf python:view.date_speller(data.start)">\n \n         <ul class="hiddenStructure">\n           <li itemprop="startDate" class="dtstart" tal:content="data/start/isoformat">end</li>\n           <li itemprop="endDate" class="dtend" tal:content="data/end/isoformat">end</li>\n+          <li  class="location" itemscope itemprop="location" itemtype="http://schema.org/Place">\n+            <span itemprop="address" tal:content="data/location" >location</span>\n+          </li>          \n         </ul>\n \n         <div class="cal_date">\n@@ -59,7 +62,7 @@\n \n         <div class="cal_info clearfix">\n           <h2 class="tileHeadline"><a href="" itemprop="url" class="url" tal:attributes="href data/url">\n-            <span itemprop="summary" class="summary" tal:content="data/title">Title</span>\n+            <span itemprop="name" class="summary" tal:content="data/title">Title</span>\n           </a></h2>\n           <div class="documentByLine">\n             <tal:date tal:replace="structure python:view.formatted_date(data)"/>\ndiff --git a/plone/app/event/browser/event_summary.pt b/plone/app/event/browser/event_summary.pt\nindex 406c9bf9..0a62c7cb 100644\n--- a/plone/app/event/browser/event_summary.pt\n+++ b/plone/app/event/browser/event_summary.pt\n@@ -22,7 +22,7 @@\n     <tal:cond condition="data/subjects">\n       <li class="event-category">\n         <strong i18n:translate="event_what">What</strong>\n-        <span itemprop="eventType" tal:repeat="item data/subjects" tal:content="item" />\n+        <span itemprop="disambiguatingDescription" tal:repeat="item data/subjects" tal:content="item" />\n       </li>\n     </tal:cond>\n     </tal:cond>\n@@ -72,9 +72,9 @@\n \n     <tal:cond condition="python:\'location\' not in excludes">\n     <tal:cond condition="data/location">\n-      <li class="event-location">\n+      <li class="event-location" itemprop="location" itemscope itemtype="http://schema.org/Place">\n         <strong i18n:translate="event_where">Where</strong>\n-        <span itemprop="location" tal:content="data/location">Location</span>\n+        <span itemprop="address" tal:content="data/location" >Location</span>\n       </li>\n     </tal:cond>\n     </tal:cond>\ndiff --git a/plone/app/event/browser/event_view.pt b/plone/app/event/browser/event_view.pt\nindex 82ec4468..538fc067 100644\n--- a/plone/app/event/browser/event_view.pt\n+++ b/plone/app/event/browser/event_view.pt\n@@ -11,11 +11,11 @@\n <metal:block define-macro="content-core">\n <tal:def tal:define="data nocall:view/data">\n \n-  <div class="event clearfix" itemscope itemtype="http://data-vocabulary.org/Event">\n+  <div class="event clearfix" itemscope itemtype="https://schema.org/Event">\n \n     <ul class="hiddenStructure">\n       <li><a itemprop="url" class="url" href="" tal:attributes="href data/url" tal:content="data/url">url</a></li>\n-      <li itemprop="summary" class="summary" tal:content="data/title">title</li>\n+      <li itemprop="name" class="summary" tal:content="data/title">title</li>\n       <li itemprop="startDate" class="dtstart" tal:content="data/start/isoformat">start</li>\n       <li itemprop="endDate" class="dtend" tal:content="data/end/isoformat">end</li>\n       <li itemprop="description" class="description" tal:content="data/description">description</li>\n'

