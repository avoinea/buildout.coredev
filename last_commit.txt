Repository: plone.rest


Branch: refs/heads/master
Date: 2020-03-22T20:50:54+01:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.rest/commit/a2e3699d5977ae930ab12226748d1b7a27cb4219

Fix Travis build (#103)

* Fix Travis.

* More Travis fixes.

* pin requests

* Pin Pygments

* Do not run Plone 5.0 tests on Travis.

* Fix pygments pin

Files changed:
M .travis.yml
M Makefile
M plone-4.3.x.cfg
M plone-5.0.x.cfg
M plone-5.1.x.cfg
M plone-5.2.x.cfg
M requirements.txt
M versions.cfg

b'diff --git a/.travis.yml b/.travis.yml\nindex f3320f3..38ef75b 100644\n--- a/.travis.yml\n+++ b/.travis.yml\n@@ -8,15 +8,12 @@ cache:\n     - $HOME/buildout-cache\n env:\n   - PLONE_VERSION=4.3.x\n-  - PLONE_VERSION=5.0.x\n   - PLONE_VERSION=5.1.x\n   - PLONE_VERSION=5.2.x\n-matrix:\n+jobs:\n   exclude:\n     - python: 3.7\n       env: PLONE_VERSION=4.3.x\n-    - python: 3.7\n-      env: PLONE_VERSION=5.0.x\n     - python: 3.7\n       env: PLONE_VERSION=5.1.x\n before_install:\ndiff --git a/Makefile b/Makefile\nindex b075652..1058c76 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -82,7 +82,12 @@ test-performance:\n .PHONY: Code Analysis\n code-analysis:  ## Code Analysis\n \tbin/code-analysis\n-\tbin/black src/\n+\tif [ -f "bin/black" ]; then bin/black src/ --check ; fi\n+\n+.PHONY: Black\n+black:  ## Black\n+\tbin/code-analysis\n+\tif [ -f "bin/black" ]; then bin/black src/ ; fi\n \n .PHONY: Build Docs\n docs:  ## Build Docs\ndiff --git a/plone-4.3.x.cfg b/plone-4.3.x.cfg\nindex 3668fac..3a0c6cb 100644\n--- a/plone-4.3.x.cfg\n+++ b/plone-4.3.x.cfg\n@@ -2,12 +2,37 @@\n extends =\n     base.cfg\n     http://dist.plone.org/release/4.3.19/versions.cfg\n-    versions.cfg\n \n [versions]\n pytz = 2017.3\n zope.interface = 4.1.0\n # fixes zlib failure: https://stackoverflow.com/questions/34631806/fail-during-installation-of-pillow-python-module-in-linux\n-Pillow = 5.4.1\n+# Pillow = 5.4.1\n future = 0.17.1\n six = 1.11.0\n+\n+# Required for Python 2.7 compatibility\n+more-itertools = <6.0.0\n+zipp = >=0.5, <2a\n+\n+# plone.restapi specific\n+plone.schema = 1.2.0\n+\n+# zest.releaser\n+zest.releaser = 6.20.1\n+twine = 1.11.0\n+requests = 2.22.0\n+towncrier = 19.2.0\n+zestreleaser.towncrier = 1.1.0\n+# docutils = 0.13.1\n+\n+# Sphinx\n+Sphinx = 1.6.5\n+docutils = 0.14\n+Pygments = 2.5.2\n+sphinxcontrib-httpexample = 0.7.0\n+sphinxcontrib-httpdomain = 1.5.0\n+sphinx-rtd-theme = 0.2.4\n+Jinja2 = 2.10\n+Babel = 2.5.1\n+astunparse = 1.6.2\n\\ No newline at end of file\ndiff --git a/plone-5.0.x.cfg b/plone-5.0.x.cfg\nindex 84130e9..04cd575 100644\n--- a/plone-5.0.x.cfg\n+++ b/plone-5.0.x.cfg\n@@ -2,4 +2,29 @@\n extends =\n     base.cfg\n     http://dist.plone.org/release/5.0.10/versions.cfg\n-    versions.cfg\n+\n+[versions]\n+# fixes: SyntaxError: invalid syntax (more.py, line 340)\n+zipp = 0.5.2\n+\n+# plone.restapi specific\n+plone.schema = 1.2.0\n+\n+# zest.releaser\n+zest.releaser = 6.20.1\n+twine = 1.11.0\n+requests = 2.22.0\n+towncrier = 19.2.0\n+zestreleaser.towncrier = 1.1.0\n+# docutils = 0.13.1\n+\n+# Sphinx\n+Sphinx = 1.6.5\n+docutils = 0.14\n+Pygments = 2.5.2\n+sphinxcontrib-httpexample = 0.7.0\n+sphinxcontrib-httpdomain = 1.5.0\n+sphinx-rtd-theme = 0.2.4\n+Jinja2 = 2.10\n+Babel = 2.5.1\n+astunparse = 1.6.2\n\\ No newline at end of file\ndiff --git a/plone-5.1.x.cfg b/plone-5.1.x.cfg\nindex 2fde641..b3d7a7e 100644\n--- a/plone-5.1.x.cfg\n+++ b/plone-5.1.x.cfg\n@@ -1,5 +1,30 @@\n [buildout]\n extends =\n     base.cfg\n-    http://dist.plone.org/release/5.1.5/versions.cfg\n-    versions.cfg\n+    http://dist.plone.org/release/5.1.6/versions.cfg\n+\n+[versions]\n+# fixes: SyntaxError: invalid syntax (more.py, line 340)\n+zipp = 0.5.2\n+\n+# plone.restapi specific\n+plone.schema = 1.2.0\n+\n+# zest.releaser\n+zest.releaser = 6.20.1\n+twine = 1.11.0\n+requests = 2.22.0\n+towncrier = 19.2.0\n+zestreleaser.towncrier = 1.1.0\n+# docutils = 0.13.1\n+\n+# Sphinx\n+Sphinx = 1.6.5\n+docutils = 0.14\n+Pygments = 2.5.2\n+sphinxcontrib-httpexample = 0.7.0\n+sphinxcontrib-httpdomain = 1.5.0\n+sphinx-rtd-theme = 0.2.4\n+Jinja2 = 2.10\n+Babel = 2.5.1\n+astunparse = 1.6.2\n\\ No newline at end of file\ndiff --git a/plone-5.2.x.cfg b/plone-5.2.x.cfg\nindex 42e83a7..dbb9600 100644\n--- a/plone-5.2.x.cfg\n+++ b/plone-5.2.x.cfg\n@@ -1,6 +1,10 @@\n [buildout]\n extends =\n     base.cfg\n-    http://dist.plone.org/release/5.2/versions.cfg\n+    http://dist.plone.org/release/5.2.1/versions.cfg\n find-links += http://dist.plone.org/thirdparty/\n versions=versions\n+\n+[versions]\n+# httpie depdendency, Pygments conflicts with \n+Pygments = 2.5.2\ndiff --git a/requirements.txt b/requirements.txt\nindex c3433e9..f6ac0d7 100644\n--- a/requirements.txt\n+++ b/requirements.txt\n@@ -1,3 +1,3 @@\n # Keep this file in sync with: https://github.com/kitconcept/buildout/edit/master/requirements.txt\n-setuptools==41.0.1\n+setuptools==42.0.2\n zc.buildout==2.13.2\ndiff --git a/versions.cfg b/versions.cfg\nindex af5f341..4087d74 100644\n--- a/versions.cfg\n+++ b/versions.cfg\n@@ -1,36 +1,4 @@\n [versions]\n-httpie = 0.9.4\n-\n # Buildout\n setuptools =\n zc.buildout =\n-zc.recipe.egg = 2.0.3\n-\n-# plone.recipe.varnish\n-plone.recipe.varnish = 1.3\n-\n-# Code-analysis\n-plone.recipe.codeanalysis = 3.0.1\n-coverage = 3.7.1\n-pep8 = 1.7.1\n-flake8 = 3.5.0\n-flake8-coding = 1.3.2\n-pycodestyle = 2.3.1\n-\n-# Release\n-zest.releaser = 6.17.0\n-twine = 1.11.0\n-requests = 2.18.4\n-towncrier = 19.2.0\n-zestreleaser.towncrier = 1.1.0\n-docutils = 0.13.1\n-\n-# Sphinx\n-Sphinx = 1.6.5\n-docutils = 0.14\n-Pygments = 2.2.0\n-sphinxcontrib-httpexample = 0.7.0\n-sphinxcontrib-httpdomain = 1.5.0\n-sphinx-rtd-theme = 0.2.4\n-Jinja2 = 2.10\n-Babel = 2.5.1\n'

